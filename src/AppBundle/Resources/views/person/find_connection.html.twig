{% extends '@ancestors/base.html.twig' %}
{% block body %}
<script src="{{ asset('js/d3/lodash.min.js') }}"></script>
<script src="{{ asset('js/d3/d3.v4.min.js') }}"></script>
<script src="{{ asset('js/d3/dTree.min.js') }}"></script>
<style>
svg {
  font: 10px sans-serif;
}
.linage {
  fill: none;
  stroke: #000;
}
.marriage {
  fill: none;
  stroke: black;
}
.man {
  background-color: lightblue;
  border-style: solid;
  border-width: 1px;
}
.woman {
  background-color: pink;
  border-style: solid;
  border-width: 1px;
}
.emphasis{
  font-style: italic;
}
p {
  padding:0;
  margin:0;
}
</style>
    <div id="wrapper">
        <div id="container">
            <div class="expanded row text-center">
                <div id="treeGraph"></div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
<script type="text/javascript">
data = {{ data|raw }};

myContainerMaxWidth = $("#treeGraph").width();
myContainerMaxHeight = $(window).height() - $("nav").height() - 2 * 15;

options = {
  target: '#treeGraph',
  debug: true,
  width: myContainerMaxWidth,
  height: myContainerMaxHeight,
  callbacks: {
    /*
      Callbacks should only be overwritten on a need to basis.
      See the section about callbacks below.
    */
  },
  margin: {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  },
  nodeWidth: myContainerMaxWidth/5,
  styles: {
    node: 'node',
    linage: 'linage',
    marriage: 'marriage',
    text: 'nodeText'
  }
};

dTree.init(data, options);
</script>
{% endblock %}
